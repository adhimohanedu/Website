{"title":"Define the data","markdown":{"headingText":"Define the data","containsRefs":false,"markdown":"**#Group No: 8**\n\n**Members:**\n\nAdhi Mohan\n\nPothula Sai Padma Sriya\n\n![](images/clipboard-720602893.png)\n\nAbove is the Data Visualization from a Bad Graph representing the US Map with states in polygonal structures with Uninsured rates(percentages). The data visualization does not seem to clearly depict the interpretations from looking at the graph and also the state boundaries and the color coding are similar to each other which makes it difficult to analyze the visualization. Hence, we consider this as a Bad Graph.\n\nThe visualisation chosen had the following three main issues:\n\n-   Issue 1: Choice of visualisation style is attempting more of an aesthetic approach rather than a functional approach. The visualisation draws the viewers eye, but the choice to make it eye catching overpowers the meaning.\n\n-   Issue 2: The size of each data point is equal, even though the data is not.\n\n-   Issue 3: The colours used are not ideal for color blindness.\n\nGood Charts convey information. Great charts enable, inform and improve decision making. - Dante Vitagliano. Now, let's reconstruct the above Bad Graph making it much easier to analyze the data in the visualization. Let us start with the Visualization of the US Map from map_data showing the states with accurate boundaries and the Percentage of Uninsured rates.\n\nHere, we use the following libraries - library(tidyverse), library(maps), library(ggrepel), library(dplyr) to get the Map from the map_data and plotting state renamed as region. The maps package contains a lot of outlines of continents, countries and states. The maps package comes with a plotting function, but we will opt to use a ggplot to plot the maps in the maps package. The ggrepel package in R simplifies the process of avoiding overlapped texts in the plots. The dplyr package is used for making data manipulation easier.\n\n```{r}\nlibrary(tidyverse)\nlibrary(maps)\nlibrary(ggrepel)\nlibrary(dplyr)\n\ndata <- read.csv(\"/Users/adhimohan/Desktop/STAT/Stat dataset pro.csv\", fileEncoding = \"ISO-8859-1\")\n\n# Get US map data with state names\nus_map <- map_data(\"state\")\n\ndata <- data %>%\n  rename(region = state)\n\ndata <- data %>%\n  mutate(region = tolower(region))\n\n# Merge data with us_map by region\nmap_data <- left_join(us_map, data, by = \"region\")\nmap_data$uninsured_rates <- gsub(\"%\", \"\", map_data$uninsured_rates)\nmap_data$uninsured_rates <- as.numeric(map_data$uninsured_rates)\n\n# Aggregate data by state\nsymbols_data <- map_data %>%\n  group_by(region) %>%\n  summarize(long = mean(long), lat = mean(lat), \n            symbols = first(symbols), uninsured_rates = first(uninsured_rates))\n\n# Plot the US map with state symbols and uninsured rates\nggplot() +\n  geom_polygon(data = us_map, aes(x = long, y = lat, group = group), \n               color = \"#1AFF1A\", fill = \"#F7EFB4\") +  # Add state polygons\n  geom_text(data = symbols_data, aes(x = long, y = lat, label = paste(symbols, \"\\n\", uninsured_rates,\"%\")), \n            size = 3, color = \"black\", fontface = \"bold\", hjust = 0.5) + \n  labs(title = \"Uninsured Rates Percentage by State in the US\")+# Add state symbols and uninsured rates as labels\n  coord_map() +                                  # Use a map projection\n  theme_void()                                   # Remove axis and background\n```\n\nAbove is the Map plotted using ggplot where we merge the region in map data using left_join. The US Map shows the data of the Symbols of each state with their accurate boundaries with their percentage of Uninsured rates listed below.\n\nLet's implement the same US Map using the plot_ly function to show more discrete data of each state. The plotly Library makes interactive, quality graphs. The Lowest and Highest Uninsured rates for each state are represented by the color coding ranging from Green as the Lowest to Red as the Highest.\n\n```{r}\nlibrary(tidyverse)\nlibrary(maps)\nlibrary(ggrepel)\nlibrary(dplyr)\nlibrary(plotly)\n\n# Define the data\ndata <- read.csv(\"/Users/adhimohan/Desktop/STAT/Stat dataset pro.csv\", fileEncoding = \"ISO-8859-1\")\n\n# Get US map data with state names\nus_map <- map_data(\"state\")\n\ndata <- data %>%\n  rename(region = state)\n\ndata <- data %>%\n  mutate(region = tolower(region))\n\n# Merge data with us_map by region\nmap_data <- left_join(us_map, data, by = \"region\")\nmap_data$uninsured_rates <- gsub(\"%\", \"\", map_data$uninsured_rates)\nmap_data$uninsured_rates <- as.numeric(map_data$uninsured_rates)\n\n# Order symbols according to state column\nmap_data <- map_data %>% \n  arrange(region)\n\n# Create ggplot2 plot\ngg <- ggplot(data = map_data, aes(x = long, y = lat, group = group, \n                                  fill = as.numeric(uninsured_rates), text = \n                                    paste(\"State: \", region, \"<br>Uninsured Rate: \", uninsured_rates,\n                                          \"%<br>Symbols: \", symbols))) +\n  geom_polygon(color = \"#FFFFFF\") +\n  geom_text_repel(data = map_data %>% distinct(region, .keep_all = TRUE),\n                  aes(label = symbols), size = 3, color = \"#121D12\",\n                  box.padding = unit(0.35, \"lines\"), # Adjust padding\n                  point.padding = unit(0.5, \"lines\"), # Adjust padding\n                  segment.color = \"#FFFFFF\") + # Add segment color\n  scale_fill_gradient(name = \"Uninsured Rate (%)\", na.value = \"#55C555\",\n                      low = \"#1AFF1A\", high = \"#DC3220\", guide = \"legend\") +\n  labs(title = \"Uninsured Rates Percentage by State in the US\", \n       subtitle = \"Darker colors represent higher uninsured rates\") +\n  theme_minimal() +\n  theme(legend.position = \"right\")\n\n# Convert ggplot2 plot to plotly\nggplotly(gg, tooltip = \"text\")\n```\n\nAbove is the Visualization of the US Map done using plot_ly. When the cursor is taken upon the any state, it gives the Name of the state, Symbol and the Uninsured rate. The Red color indicates the state with the highest Uninsured rate and Light Green color indicates the states with the lowest Uninsured rate.\n\nMapped data: Data visualization of Name of the State vs Percentage of Uninsured population using Bargraph.\n\n```{r}\nlibrary(tidyverse)\nlibrary(maps)\nlibrary(ggrepel)\nlibrary(dplyr)\nlibrary(plotly)\n\n# Define the data\ndata <- read.csv(\"/Users/adhimohan/Desktop/STAT/Stat dataset pro.csv\", fileEncoding = \"ISO-8859-1\")\n\n# Convert uninsured_rates to numeric\ndata$uninsured_rates <- as.numeric(gsub(\"%\", \"\", data$uninsured_rates))\n\n# Get US map data with state names\nus_map <- map_data(\"state\")\n\ndata <- data %>%\n  rename(region = state)\n\ndata <- data %>%\n  mutate(region = tolower(region))\n\n# Reorder levels of region based on uninsured_rates\ndata$region <- factor(data$region, levels = data$region[order(-data$uninsured_rates)])\n\n# Create the plot\np <- ggplot(data, aes(x = uninsured_rates, y = region)) +\n  geom_col(fill = \"#FEFE62\", color = \"#E66100\") +  # Use geom_col instead of geom_bar\n  geom_text(aes(label = paste0(uninsured_rates, \"%\")), hjust = 1, nudge_x = -0.5,\n            size = 3, color = \"#1A85FF\") +  # Add % symbol to label\n  labs(title = \"Health Insurance Coverage in the US:\", \n       subtitle = \"Percentage of Population Without Health Insurance\",\n       x = \"Percentage of Uninsured Population\",\n       y = \"Name of the States\")\n\np\n\n```\n\nAbove is the graph showing the data of Uninsured population against the states in an Ascending order. Each bar has its Uninsured rate(percentage) displayed at the end of the bar.\n\nMapped data: State Population vs Uninsured rates using a Bargraph.\n\n```{r}\nlibrary(ggplot2)\nlibrary(scales) # for comma formatting\n\n# Define the data\ndata <- read.csv(\"/Users/adhimohan/Desktop/STAT/Stat dataset pro.csv\", fileEncoding = \"ISO-8859-1\")\n\n# Remove commas and convert state_population to numeric\ndata$state_population <- as.numeric(gsub(\",\", \"\", data$state_population))\n\n# Order data by uninsured rates for stacked bar chart\ndata <- data[order(data$uninsured_rates), ]\n\n# Create stacked bar chart\nggplot(data, aes(x = state, y = state_population, fill = uninsured_rates)) +\n  geom_bar(stat = \"identity\") +\n  scale_fill_gradient(low = \"green\", high = \"red\") +\n  scale_y_continuous(labels = comma) + # Format y-axis labels with commas\n  labs(title = \"Uninsured Rates vs. State Population\",\n       x = \"State\",\n       y = \"Population of the state\",\n       fill = \"Uninsured Rates\") +\n  theme_minimal() +\n  theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust = 1))\n```\n\nAbove is the graph showing the Population of the state plotted against its Uninsured rates. The Gradient color fill is as per the Uninsured rates. The Legend guide is added to the visualization where the Green represents the Lowest Uninsured rate and Red represents the Highest Uninsured rate. The height of the bar represents the population.\n\nMapped data: Total US Population vs Total Uninsured Population using a Histogram.\n\n```{r}\nlibrary(ggplot2)\n# Define the data\ndata <- read.csv(\"/Users/adhimohan/Desktop/STAT/Stat dataset pro.csv\", fileEncoding = \"ISO-8859-1\")\n\n# Provided data\nstate_population <- data$state_population\n\nuninsured_population <- data$uninsured_population\n# Convert commas to empty string and then to numeric\nstate_population <- as.numeric(gsub(\",\", \"\", state_population))\nuninsured_population <- as.numeric(gsub(\",\", \"\", uninsured_population))\n\n# Calculate the sum of state_population and uninsured_population\nsum_state_population <- sum(state_population)\nsum_uninsured_population <- sum(uninsured_population)\n\n# Create a data frame for histogram\nhist_data <- data.frame(Population = c(\"Uninsured Population\", \"Total US Population\"),\n                        Sum = c(sum_state_population, sum_uninsured_population))\n\n# Plot histogram\nggplot(hist_data, aes(x = Population, y = Sum, fill = Population)) +\n  geom_bar(stat = \"identity\", width = 0.5) + scale_y_continuous(labels = scales::comma) +\n  labs(title = \"Summation of State Population vs Uninsured Population\",\n       x = \"Population Type\",\n       y = \"Population\") +\n  scale_fill_manual(values = c(\"#1AFF1A\", \"#4B0092\")) +\n  theme_minimal()\n```\n\nAbove is a Graph representing the Total US Population compared with the Total Uninsured Population in the US.\n\nMapped data: Top 10 states with Highest population of Uninsured rates using a Bar Graph.\n\n```{r}\n# Create a data frame with the given data\nstate_data <- data.frame(\n  State = c(\"Texas\", \"Oklahoma\", \"Georgia\", \"Florida\", \"Mississippi\", \"Wyoming\", \"Alaska\", \"Nevada\", \"Arizona\", \"North Carolina\"),\n  Uninsured_Percentage = c(18.4, 14.3, 13.4, 13.2, 13, 12.3, 12.2, 11.4, 11.3, 11.3)\n)\n\n# Sort the data frame by Uninsured_Percentage\nstate_data <- state_data[order(state_data$Uninsured_Percentage, decreasing = TRUE), ]\n\n# Create the bar plot\nbarplot(state_data$Uninsured_Percentage, names.arg = state_data$State, \n        col = \"#1A85FF\", ylim = c(0, 20),\n        xlab = \"\", ylab = \"Population Without Health Insurance (%)\",\n        main = \"Top 10 States With the Highest Percentage of Uninsured Americans\",\n        cex.names = 0.8, las = 2, border = NA)\n```\n\nAbove is the graph representing the Top 10 states having the Highest Uninsured rates in the US. From which, Texas ranks first for Highest Uninsured Rates.\n\nAll the above colors used are Color Blind friendly.\n\nReference:\n\n\\[1\\] <https://datacarpentry.org/R-genomics/04-dplyr.html#:~:text=Enter%20dplyr%20.,you%20access%20to%20more%20functions>\n\n\\[2\\]<https://howmuch.net/articles/health-insurance-coverage-in-the-us>\n","srcMarkdownNoYaml":""},"formats":{"html":{"identifier":{"display-name":"HTML","target-format":"html","base-format":"html"},"execute":{"fig-width":7,"fig-height":5,"fig-format":"retina","fig-dpi":96,"df-print":"default","error":false,"eval":true,"cache":null,"freeze":false,"echo":true,"output":true,"warning":true,"include":true,"keep-md":false,"keep-ipynb":false,"ipynb":null,"enabled":null,"daemon":null,"daemon-restart":false,"debug":false,"ipynb-filters":[],"engine":"knitr"},"render":{"keep-tex":false,"keep-source":false,"keep-hidden":false,"prefer-html":false,"output-divs":true,"output-ext":"html","fig-align":"default","fig-pos":null,"fig-env":null,"code-fold":"none","code-overflow":"scroll","code-link":false,"code-line-numbers":false,"code-tools":false,"tbl-colwidths":"auto","merge-includes":true,"inline-includes":false,"preserve-yaml":false,"latex-auto-mk":true,"latex-auto-install":true,"latex-clean":true,"latex-max-runs":10,"latex-makeindex":"makeindex","latex-makeindex-opts":[],"latex-tlmgr-opts":[],"latex-input-paths":[],"latex-output-dir":null,"link-external-icon":false,"link-external-newwindow":false,"self-contained-math":false,"format-resources":[],"notebook-links":true,"format-links":true},"pandoc":{"standalone":true,"wrap":"none","default-image-extension":"png","to":"html","output-file":"midproject.html"},"language":{"toc-title-document":"Table of contents","toc-title-website":"On this page","related-formats-title":"Other Formats","related-notebooks-title":"Notebooks","source-notebooks-prefix":"Source","section-title-abstract":"Abstract","section-title-appendices":"Appendices","section-title-footnotes":"Footnotes","section-title-references":"References","section-title-reuse":"Reuse","section-title-copyright":"Copyright","section-title-citation":"Citation","appendix-attribution-cite-as":"For attribution, please cite this work as:","appendix-attribution-bibtex":"BibTeX citation:","title-block-author-single":"Author","title-block-author-plural":"Authors","title-block-affiliation-single":"Affiliation","title-block-affiliation-plural":"Affiliations","title-block-published":"Published","title-block-modified":"Modified","callout-tip-title":"Tip","callout-note-title":"Note","callout-warning-title":"Warning","callout-important-title":"Important","callout-caution-title":"Caution","code-summary":"Code","code-tools-menu-caption":"Code","code-tools-show-all-code":"Show All Code","code-tools-hide-all-code":"Hide All Code","code-tools-view-source":"View Source","code-tools-source-code":"Source Code","code-line":"Line","code-lines":"Lines","copy-button-tooltip":"Copy to Clipboard","copy-button-tooltip-success":"Copied!","repo-action-links-edit":"Edit this page","repo-action-links-source":"View source","repo-action-links-issue":"Report an issue","back-to-top":"Back to top","search-no-results-text":"No results","search-matching-documents-text":"matching documents","search-copy-link-title":"Copy link to search","search-hide-matches-text":"Hide additional matches","search-more-match-text":"more match in this document","search-more-matches-text":"more matches in this document","search-clear-button-title":"Clear","search-detached-cancel-button-title":"Cancel","search-submit-button-title":"Submit","search-label":"Search","toggle-section":"Toggle section","toggle-sidebar":"Toggle sidebar navigation","toggle-dark-mode":"Toggle dark mode","toggle-reader-mode":"Toggle reader mode","toggle-navigation":"Toggle navigation","crossref-fig-title":"Figure","crossref-tbl-title":"Table","crossref-lst-title":"Listing","crossref-thm-title":"Theorem","crossref-lem-title":"Lemma","crossref-cor-title":"Corollary","crossref-prp-title":"Proposition","crossref-cnj-title":"Conjecture","crossref-def-title":"Definition","crossref-exm-title":"Example","crossref-exr-title":"Exercise","crossref-ch-prefix":"Chapter","crossref-apx-prefix":"Appendix","crossref-sec-prefix":"Section","crossref-eq-prefix":"Equation","crossref-lof-title":"List of Figures","crossref-lot-title":"List of Tables","crossref-lol-title":"List of Listings","environment-proof-title":"Proof","environment-remark-title":"Remark","environment-solution-title":"Solution","listing-page-order-by":"Order By","listing-page-order-by-default":"Default","listing-page-order-by-date-asc":"Oldest","listing-page-order-by-date-desc":"Newest","listing-page-order-by-number-desc":"High to Low","listing-page-order-by-number-asc":"Low to High","listing-page-field-date":"Date","listing-page-field-title":"Title","listing-page-field-description":"Description","listing-page-field-author":"Author","listing-page-field-filename":"File Name","listing-page-field-filemodified":"Modified","listing-page-field-subtitle":"Subtitle","listing-page-field-readingtime":"Reading Time","listing-page-field-categories":"Categories","listing-page-minutes-compact":"{0} min","listing-page-category-all":"All","listing-page-no-matches":"No matching items"},"metadata":{"lang":"en","fig-responsive":true,"quarto-version":"1.3.450","theme":"cosmo"},"extensions":{"book":{"multiFile":true}}}},"projectFormats":["html"]}